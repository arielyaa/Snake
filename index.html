<!DOCTYPE html>

<html lang="zh">

<head>

Â  <meta charset="UTF-8" />

Â  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>

Â  <title>è²ªåƒè›‡ Snake Game</title>

Â  <style>

Â  Â  html, body {

Â  Â  Â  margin: 0;

Â  Â  Â  padding: 0;

Â  Â  Â  background: #111;

Â  Â  Â  color: #eee;

Â  Â  Â  font-family: sans-serif;

Â  Â  Â  text-align: center;

Â  Â  Â  overflow: hidden;

Â  Â  }

Â  Â  h1 {

Â  Â  Â  margin-top: 10px;

Â  Â  }

Â  Â  canvas {

Â  Â  Â  border: 3px solid #0f0;

Â  Â  Â  background: black;

Â  Â  Â  display: block;

Â  Â  Â  margin: 10px auto;

Â  Â  }

Â  Â  #score {

Â  Â  Â  font-size: 18px;

Â  Â  }

Â  </style>

</head>

<body>

Â  <h1>ğŸ è²ªåƒè›‡ Snake Game</h1>

Â  <canvas id="game" width="400" height="400"></canvas>

Â  <div id="score">åˆ†æ•¸: 0</div>


Â  <script>

Â  Â  const canvas = document.getElementById('game');

Â  Â  const ctx = canvas.getContext('2d');

Â  Â  const gridSize = 20;

Â  Â  const tileCount = canvas.width / gridSize;


Â  Â  let snake = [{x: 10, y: 10}];

Â  Â  let velocityX = 1;

Â  Â  let velocityY = 0;

Â  Â  let food = {x: 15, y: 15};

Â  Â  let score = 0;

Â  Â  let gameOver = false;


Â  Â  function gameLoop() {

Â  Â  Â  if (gameOver) {

Â  Â  Â  Â  alert("éŠæˆ²çµæŸï¼ä½ çš„åˆ†æ•¸æ˜¯ï¼š" + score);

Â  Â  Â  Â  document.location.reload();

Â  Â  Â  Â  return;

Â  Â  Â  }


Â  Â  Â  update();

Â  Â  Â  draw();

Â  Â  }


Â  Â  function update() {

Â  Â  Â  let head = {

Â  Â  Â  Â  x: (snake[0].x + velocityX + tileCount) % tileCount,

Â  Â  Â  Â  y: (snake[0].y + velocityY + tileCount) % tileCount

Â  Â  Â  };


Â  Â  Â  for (let segment of snake) {

Â  Â  Â  Â  if (segment.x === head.x && segment.y === head.y) {

Â  Â  Â  Â  Â  gameOver = true;

Â  Â  Â  Â  Â  return;

Â  Â  Â  Â  }

Â  Â  Â  }


Â  Â  Â  snake.unshift(head);


Â  Â  Â  if (head.x === food.x && head.y === food.y) {

Â  Â  Â  Â  score++;

Â  Â  Â  Â  document.getElementById("score").textContent = "åˆ†æ•¸: " + score;

Â  Â  Â  Â  placeFood();

Â  Â  Â  } else {

Â  Â  Â  Â  snake.pop();

Â  Â  Â  }

Â  Â  }


Â  Â  function draw() {

Â  Â  Â  ctx.fillStyle = "black";

Â  Â  Â  ctx.fillRect(0, 0, canvas.width, canvas.height);


Â  Â  Â  ctx.fillStyle = "red";

Â  Â  Â  ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize, gridSize);


Â  Â  Â  ctx.fillStyle = "lime";

Â  Â  Â  for (let segment of snake) {

Â  Â  Â  Â  ctx.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize - 2, gridSize - 2);

Â  Â  Â  }

Â  Â  }


Â  Â  function placeFood() {

Â  Â  Â  let newFood;

Â  Â  Â  while (true) {

Â  Â  Â  Â  newFood = {

Â  Â  Â  Â  Â  x: Math.floor(Math.random() * tileCount),

Â  Â  Â  Â  Â  y: Math.floor(Math.random() * tileCount)

Â  Â  Â  Â  };

Â  Â  Â  Â  let conflict = snake.some(segment => segment.x === newFood.x && segment.y === newFood.y);

Â  Â  Â  Â  if (!conflict) break;

Â  Â  Â  }

Â  Â  Â  food = newFood;

Â  Â  }


Â  Â  window.addEventListener("keydown", (e) => {

Â  Â  Â  switch (e.key) {

Â  Â  Â  Â  case "ArrowUp":

Â  Â  Â  Â  Â  if (velocityY !== 1) { velocityX = 0; velocityY = -1; }

Â  Â  Â  Â  Â  break;

Â  Â  Â  Â  case "ArrowDown":

Â  Â  Â  Â  Â  if (velocityY !== -1) { velocityX = 0; velocityY = 1; }

Â  Â  Â  Â  Â  break;

Â  Â  Â  Â  case "ArrowLeft":

Â  Â  Â  Â  Â  if (velocityX !== 1) { velocityX = -1; velocityY = 0; }

Â  Â  Â  Â  Â  break;

Â  Â  Â  Â  case "ArrowRight":

Â  Â  Â  Â  Â  if (velocityX !== -1) { velocityX = 1; velocityY = 0; }

Â  Â  Â  Â  Â  break;

Â  Â  Â  }

Â  Â  });


Â  Â  // æ‰‹æ©Ÿè§¸æ§æ»‘å‹•æ”¯æ´

Â  Â  let touchStartX = 0;

Â  Â  let touchStartY = 0;


Â  Â  window.addEventListener("touchstart", (e) => {

Â  Â  Â  touchStartX = e.touches[0].clientX;

Â  Â  Â  touchStartY = e.touches[0].clientY;

Â  Â  });


Â  Â  window.addEventListener("touchend", (e) => {

Â  Â  Â  const dx = e.changedTouches[0].clientX - touchStartX;

Â  Â  Â  const dy = e.changedTouches[0].clientY - touchStartY;


Â  Â  Â  if (Math.abs(dx) > Math.abs(dy)) {

Â  Â  Â  Â  if (dx > 30 && velocityX !== -1) {

Â  Â  Â  Â  Â  velocityX = 1; velocityY = 0;

Â  Â  Â  Â  } else if (dx < -30 && velocityX !== 1) {

Â  Â  Â  Â  Â  velocityX = -1; velocityY = 0;

Â  Â  Â  Â  }

Â  Â  Â  } else {

Â  Â  Â  Â  if (dy > 30 && velocityY !== -1) {

Â  Â  Â  Â  Â  velocityX = 0; velocityY = 1;

Â  Â  Â  Â  } else if (dy < -30 && velocityY !== 1) {

Â  Â  Â  Â  Â  velocityX = 0; velocityY = -1;

Â  Â  Â  Â  }

Â  Â  Â  }

Â  Â  });


Â  Â  setInterval(gameLoop, 100);

Â  </script>

</body>

</html>

